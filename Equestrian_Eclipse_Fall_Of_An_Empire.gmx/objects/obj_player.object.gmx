<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_trixie_down</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>-1</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Setup

phy_fixed_rotation = true;
sprite_index = global.character_right;

//Variables
action = false;
attack_type = 1;
notme = true;
interaction_delay = false;
general_timer = true;

walk_speed = 1;

message_1a = "";    //Message 1 content
message_1b = false; //Message 1 start timer
message_1c = false; //Message 1 to be stopped
message_2a = "";
message_2b = false;
message_2c = false;
message_3a = "";
message_3b = false;
message_3c = false;

message_big_1a = "";
message_big_1b = "";
message_big_1c = "";

alpha1 = 1;
alpha2 = 1;
alpha3 = 1;

alpha_big1 = 1;

inv_display = 0;        //Slot number for display
inv_quest = 0;          //Choice if inventory or quest assignment (0 = inv, other = quest);
inv_show = false;
inv_assigned = false;
inv_slot_selected = false;
inv_preview_x = 0;
inv_preview_y = 0;
quest_show = false;
quest_show_prepare = false;

quest1 = "";
quest_assigned = false;
q_success = false;

//Status
max_hp = 50;
hp = max_hp;

max_stamina = 30;
stamina = max_stamina;

max_magic = 30;
magic = max_magic;

//Inventory
for(var i = 99; i &gt; -1; i--;)       //Actual inventory
{
    global.items[i,0] = "";         //Name
    global.items[i,1] = "";         //Description
    global.items[i,2] = -1;         //Type
    global.items[i,3] = spr_none;   //Sprite
    global.items[i,4] = 0;          //Weight
    global.items[i,5] = 0;          //Price
    global.items[i,6] = "";         //Value 1 (String)
    global.items[i,7] = 0;          //Value 2 (Number)
    global.items[i,8] = 0;          //Value 3 (Number)
}

show_debug_message("Inventory arrays finished.");

weight = 0;
weight_limit = 10;

equip_0 = -1;                       //1st weapon
equip_1 = -1;                       //2nd weapon
equip_2 = -1;                       //Shield
equip_3 = -1;                       //Ammonition (bolts)
equip_4 = -1;                       //Helmet
equip_5 = -1;                       //Body armour
equip_6 = -1;                       //Front hoofs
equip_7 = -1;                       //Back hoofs

//Quests
for(var i = 5; i &gt; -1; i--;)
{
    global.quests[i,0] = "";
}

show_debug_message("Quest array finished.");

//Window messages
for(var i = 6; i &gt; -1; i--;)        //6 = amount of cases
{
    msg[i, 0] = 5;                  //Length of whole conversation
    msg[i, 1] = spr_inv_test;       //Sprite 1st message
    msg[i, 2] = "No message (1).";  //1st message
    msg[i, 3] = spr_inv_test;       //Sprite 2nd message
    msg[i, 4] = "No message (2).";  //2nd message
    msg[i, 5] = spr_inv_test;       //Sprite 3rd message
    msg[i, 6] = "No message (3).";  //3nd message
    msg[i, 7] = spr_inv_test;       //Sprite 4th message
    msg[i, 8] = "No message (4).";  //4th message
    msg[i, 9] = spr_inv_test;       //Sprite 5th message
    msg[i, 10] = "No message (5)."; //5th message
}

show_debug_message("Message array finished.");

//Sample messages
speaking = false;

//Handle text loop
text_loop = 0;
text_loop_limit = 5;
speech_active_counter = 0;

//Message array system variables
msg_pony = 0;
msg_conv = 0;
msg_case = 0;

//Status effects
status_effect1 = "";            //Current effect 1
status_effect2 = "";            //Current effect 2
effect1_counter = 0;            //Seconds of effect 1
effect2_counter = 0;            //Seconds of effect 2

effect_burn_length = 5;         //Length of effect burning
effect_slow_length = 5;         //Length of effect 1
effect_exhausted_length = 5;    //Length of effect 2

effect_burn_damage = 1;         //Damage caused by effect burn

//Status icons
status_icon_1 = true;
status_icon_2 = false;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Respawn

dest_x = 272;
dest_y = 112;
dest_room = rm_test;
respawn = false;

//Temporary

money = 10;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///General timer

general_timer = true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Status effect 2

switch(status_effect1)
{
    case "burning": //Status effect burning
    if(effect2_counter &lt; effect_burn_length)
    {
        with(instance_create(1,1,obj_status_icon_2))
        {
            sprite_index = spr_fire;
        }
        //Count up
        effect2_counter += 1;
        
        //Effect
        with(instance_create(x, y, obj_damage_popup))   //Damage popup
        {
            damage_popup = other.effect_burn_damage;
            character = other.id;
            colour = c_red;
        }
        
        hp -= other.effect_burn_damage;                 //Reduce health
        
        if(hp &lt;= 0)                                     //Drop items
        {
            //Handle game over
            show_debug_message("You died in Equestrian Eclipse. You're bad at this game and you should feel bad!");
            show_message("You died. Bad player, I expected more from you! (You can even cheat, dumbass...)");
            
            event_user(2);
        }
        
        alarm[5] = 60;                                  //Next second
    }
    else
    {
        with(obj_status_icon_2)
        {
            instance_destroy();
        }
        status_effect2 = "";                            //Reset values
        effect1_counter = 0;
    }
    break;
    
    case "slowness": //Status effect slowness
    if(effect2_counter &lt; effect_slow_length)
    {
        with(instance_create(1,1,obj_status_icon_2))
        {
            sprite_index = spr_fatigue;
        }
        //Count up
        effect2_counter += 1;
        
        //Effect
        with(instance_create(x, y, obj_damage_popup))   //Damage popup
        {
            damage_popup = "Slow";
            character = other.id;
            colour = c_red;
        }
        
        walk_speed = 0.25;                              //One forth speed
        
        alarm[5] = 60;                                  //Next second
    }
    else
    {
        with(obj_status_icon_2)
        {
            instance_destroy();
        }
        walk_speed = 1;                                 //Reset values
        status_effect2 = "";
        effect1_counter = 0;
    }
    break;
    
    case "exhausted":  //Status effect exhausted
    if(effect2_counter &lt; effect_exhausted_length)
    {
        with(instance_create(1,1,obj_status_icon_2))
        {
            sprite_index = spr_fatigue;
        }
        //Count up
        effect2_counter += 1;
        
        //Effect
        with(instance_create(x, y, obj_damage_popup))   //Damage popup
        {
            damage_popup = "Exhausted";
            character = other.id;
            colour = c_red;
        }
        
        //To be added                                   //Keep stamina low
        
        alarm[5] = 60;                                  //Next second
    }
    else
    {
        with(obj_status_icon_2)
        {
            instance_destroy();
        }
        //To be added                                   //Reset values
        status_effect2 = "";
        effect1_counter = 0;
    }
    break;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Status effect 1

switch(status_effect1)
{
    case "burning": //Status effect burning
    if(effect1_counter &lt; effect_burn_length)
    {
        with(instance_create(1,1,obj_status_icon_1))    //Create status icon 1
        {
            sprite_index = spr_fire;
        }
        //Count up
        effect1_counter += 1;
        
        //Effect
        with(instance_create(x, y, obj_damage_popup))   //Damage popup
        {
            damage_popup = other.effect_burn_damage;
            character = other.id;
            colour = c_red;
        }
        
        hp -= other.effect_burn_damage;                 //Reduce health
        
        if(hp &lt;= 0)                                     //Respawn script
        {
            //Handle game over
            show_debug_message("You died in Equestrian Eclipse. You're bad at this game and you should feel bad!");
            show_message("You died. Bad player, I expected more from you! (You can even cheat, dumbass...)");
            
            event_user(2);
        }
        
        alarm[4] = 60;                                  //Next second
    }
    else
    {
        with(obj_status_icon_1)                         //Delete status icon 1
        {
            instance_destroy();
        }
        status_effect1 = "";                            //Reset values
        effect1_counter = 0;
    }
    break;
    
    case "slowness": //Status effect slowness
    if(effect1_counter &lt; effect_slow_length)
    {
        with(instance_create(1,1,obj_status_icon_1))    //Create status icon 1
        {
            sprite_index = spr_fatigue;
        }
        //Count up
        effect1_counter += 1;
        
        //Effect
        with(instance_create(x, y, obj_damage_popup))   //Damage popup
        {
            damage_popup = "Slow";
            character = other.id;
            colour = c_red;
        }
        
        walk_speed = 0.25;                              //One forth speed
        
        alarm[4] = 60;                                  //Next second
    }
    else
    {
        with(obj_status_icon_1)                         //Delete status icon 1
        {
            instance_destroy();
        }
        walk_speed = 1;                                 //Reset values
        status_effect1 = "";
        effect1_counter = 0;
    }
    break;
    
    case "exhausted":  //Status effect exhausted
    if(effect1_counter &lt; effect_exhausted_length)
    {
        with(instance_create(1,1,obj_status_icon_1))    //Create status icon 1
        {
            sprite_index = spr_fatigue;
        }
        //Count up
        effect1_counter += 1;
        
        //Effect
        with(instance_create(x, y, obj_damage_popup))   //Damage popup
        {
            damage_popup = "Exhausted";
            character = other.id;
            colour = c_red;
        }
        
        //To be added                                   //Keep stamina low
        
        alarm[4] = 60;                                  //Next second
    }
    else
    {
        with(obj_status_icon_1)                         //Delete status icon 1
        {
            instance_destroy();
        }
        //To be added                                   //Reset values
        status_effect1 = "";
        effect1_counter = 0;
    }
    break;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Message big 1

alpha_big1 = 0.95;
message_big_1c = true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Message 3

alpha3 = 0.95;
message_3c = true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Message 2

alpha2 = 0.95;
message_2c = true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Message 1

alpha1 = 0.95;
message_1c = true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Depth

depth = (phy_position_y - 15) * -1;
phy_fixed_rotation = true;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Handle input

if(keyboard_check(ord("A")))
{
    sprite_index = global.character_left;

    if(keyboard_check(vk_shift) &amp;&amp; stamina &gt; 0)
    {
        phy_position_x -= 3 *walk_speed;
        stamina -= 2/60;
        status_running = true;
    }
    else
    {
        phy_position_x -= 2 *walk_speed;
    }
}

if(keyboard_check(ord("D")))
{
    sprite_index = global.character_right;

    if(keyboard_check(vk_shift) &amp;&amp; stamina &gt; 0)
    {
        phy_position_x += 3 *walk_speed;
        stamina -= 2/60;
        status_running = true;
    }
    else
    {
        phy_position_x += 2 *walk_speed;
    }
}

if(keyboard_check(ord("W")))
{
    sprite_index = global.character_up;

    if(keyboard_check(vk_shift) &amp;&amp; stamina &gt; 0)
    {
        phy_position_y -= 3 *walk_speed;
        stamina -= 2/60;
        status_running = true;
    }
    else
    {
        phy_position_y -= 2 *walk_speed;
    }
}

status_running = false;

if(keyboard_check(ord("S")))
{
    sprite_index = global.character_down;

    if(keyboard_check(vk_shift) &amp;&amp; stamina &gt; 0)
    {
        phy_position_y += 3 *walk_speed;
        stamina -= 2/60;
        status_running = true;
    }
    else
    {
        phy_position_y += 2 *walk_speed;
    }
}

//Stamina regeneration
if(status_running == false)
{
if(stamina &lt; max_stamina)
{
    stamina += 1/60;
}
}

//Magic regeneration
if(magic &lt; max_magic)
{
    magic += 1/60;
}

//Inventory
if(keyboard_check_released(vk_tab))
{
if(inv_show_prepare == true)
{
if(quest_show == false)
{
    if(inv_show == false)
    {
        inv_show = true;
        inv_slot_selected = false;
        cursor_sprite = spr_cursor_normal;
    }
    else
    {
        inv_show = false;
        inv_slot_selected = false;
        cursor_sprite = spr_cursor_aiming;
    }
}
}
}

if(keyboard_check(vk_tab))
{
    inv_show_prepare = true;
}
else
{
    inv_show_prepare = false;
}

//Quest screen
if(keyboard_check_released(ord("Q")))
{
if(quest_show_prepare == true)
{
if(inv_show == false)
{
    if(quest_show == false)
    {
        quest_show = true;
    }
    else
    {
        quest_show = false;
    }
}
}
}

if(keyboard_check(ord("Q")))
{
    quest_show_prepare = true;
}
else
{
    quest_show_prepare = false;
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Display
//Display interactables

obj_closest = instance_nearest(x,y,obj_interactable);
dist_interact = point_distance(phy_position_x, phy_position_y, obj_closest.x, obj_closest.y);

if(obj_closest.active == true)
{
    if(dist_interact &lt; 50)
    {
        obj_bubble.active = true;
        obj_bubble.x = obj_closest.x;
        obj_bubble.y = obj_closest.y - 20;
    }
    else
    {
        obj_bubble.active = false;
    }
}
else
{
    obj_bubble.active = false;
}

//Information assignment
if(global.message2 == true)
{
    if(message_1a == "")
    {
        message_1a = global.message1;
        message_1b = true;
    }
    else
    {
        if(message_2a == "")
        {
            message_2a = global.message1;
            message_2b = true;
        }
        else
        {
            if(message_3a == "")
            {
                message_3a = global.message1;
                message_3b = true;
            }
            else
            {
                message_1a = global.message1;
                message_1b = true;
            }
        }
    }
}

//Timer for information
if(message_1a != "")
{
if(message_1b == true)
{
    show_debug_message("Message: " + message_1a);
    alarm[0] = 120;
    message_1b = false;
    global.message2 = false;
}
}

if(message_2a != "")
{
if(message_2b == true)
{
    show_debug_message("Message: " + message_2a);
    alarm[1] = 120;
    message_2b = false;
    global.message2 = false;
}
}

if(message_3a != "")
{
if(message_3b == true)
{
    show_debug_message("Message: " + message_3a);
    alarm[2] = 120;
    message_3b = false;
    global.message2 = false;
}
}

//Fade out
if(alpha1 &lt; 1)
{
if(alpha1 &gt; 0)
{
    alpha1 -= 0.05;
}
}

if(alpha2 &lt; 1)
{
if(alpha2 &gt; 0)
{
    alpha2 -= 0.05;
}
}

if(alpha3 &lt; 1)
{
if(alpha3 &gt; 0)
{
    alpha3 -= 0.05;
}
}

//Stop information
if(alpha1 == 0)
{
if(message_1a != "")
{
if(message_1c == true)
{
    message_1a = "";
    message_1c = false;
    alpha1 = 1;
}
}
}

if(alpha2 == 0)
{
if(message_2a != "")
{
if(message_2c == true)
{
    message_2a = "";
    message_2c = false;
    alpha2 = 1;
}
}
}

if(alpha3 == 0)
{
if(message_3a != "")
{
if(message_3c == true)
{
    message_3a = "";
    message_3c = false;
    alpha3 = 1;
}
}
}

//Damage popup
if(global.damage_popup1 == true)
{
    with(instance_create(x, y, obj_damage_popup))
    {
        character = other.id;
        global.damage_popup1 = false;
    }
}

//Show big text top middle
//Information assignment
if(global.message_big2 == true)
{
    if(message_big_1a == "")
    {
        message_big_1a = global.message_big1;
        message_big_1b = true;
    }
    else
    {
        message_big_1a = global.message_big1;
        message_big_1b = true;
    }
}

//Timer for information
if(message_big_1a != "")
{
if(message_big_1b == true)
{
    show_debug_message("Message: " + message_big_1a);
    alarm[3] = 120;
    message_big_1b = false;
    global.message_big2 = false;
}
}

//Fade out
if(alpha_big1 &lt; 1)
{
if(alpha_big1 &gt; 0)
{
    alpha_big1 -= 0.05;
}
}

//Stop message
if(alpha_big1 == 0)
{
if(message_big_1a != "")
{
if(message_big_1c == true)
{
    message_big_1a = "";
    message_big_1c = false;
    alpha_big1 = 1;
}
}
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Miscellaneous

//instance_deactivate_region(view_xview[0], view_yview[0], view_wview[0], view_hview[0], false, true);
//instance_activate_region(view_xview[1], view_yview[1], view_wview[1], view_hview[1], true);

//Deactivation of objects
instance_deactivate_region(0, 0, room_width, room_height, false, true);
instance_activate_region(view_xview[0] -150, view_yview[0] -150, view_wview[0] +150, view_hview[0] +150, true);
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Z press test event

if(keyboard_check(ord("Z")))    //Prepare Z press action
{
    speech_active_counter = 1;
}

if(speech_active_counter = 1)
{
if(keyboard_check_released(ord("Z")))   //Launch action when Z is released
{
    speech_active_counter = 0;
    
    if(instance_exists(obj_window_base))    //If window was already created
    {
        if(obj_window_base.locked == false) //Only if window is not locked
        {
            with(obj_player)
            {
                text_loop += 1; //Next part of the conversation
                msg_pony = 1;   //NPC base gives player pony name
                msg_conv = 0;   //NPC base gives player conversation number
                event_user(1);  //Launch of conversation script
            }
        }
    }
    else                    //First creation of window
    {
        with(obj_player)
        {
            text_loop += 1; //Next part of the conversation
            msg_pony = 1;   //NPC base gives player pony name
            msg_conv = 0;   //NPC base gives player conversation number
            msg_case = 0;   //Error case
            event_user(1);  //Launch of conversation script
        }
    }
}
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_NPC_base1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Collide with
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_obstacles">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Collide with
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="54">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Switch Attack Type

if(attack_type == 1)
{
    attack_type = 2;
    global.message1 = "Fire: Range low, Damage high.";
    global.message2 = true;
}
else
{
    if(attack_type == 2)
    {
        attack_type = 3;
        global.message1 = "Ice: Range medium, Damage medium.";
        global.message2 = true;
    }
    else
    {
        if(attack_type == 3)
        {
            attack_type = 4;
            global.message1 = "Lightning: Range very high, Damage low.";
            global.message2 = true;
        }
        else
        {
            attack_type = 1;
            global.message1 = "Energy: Range very low, Damage very high.";
            global.message2 = true;
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="53">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Magic

dir = point_direction(phy_position_x, phy_position_y, mouse_x, mouse_y);
spawn_x = lengthdir_x(25, dir);
spawn_y = lengthdir_y(25, dir);

if(inv_show == false &amp;&amp; quest_show == false)
{
if(global.character_race == "unicorn")
{
    switch(attack_type)
    {
        case 1:
        if(magic &gt;= 5)
        {
            attack = instance_create(phy_position_x + spawn_x, phy_position_y + spawn_y, obj_attack_magic);
            magic -= 5;
            with(attack)
            {
                origin_x = phy_position_x;
                origin_y = phy_position_y;
            }
            break;
        }
        
        case 2:
        if(magic &gt;= 5)
        {
            attack = instance_create(phy_position_x + spawn_x, phy_position_y + spawn_y, obj_attack_fire);
            magic -= 5;
            with(attack)
            {
                origin_x = phy_position_x;
                origin_y = phy_position_y;
            }
            break;
        }
        
        case 3:
        if(magic &gt;= 5)
        {
            attack = instance_create(phy_position_x + spawn_x, phy_position_y + spawn_y, obj_attack_ice);
            magic -= 5;
            with(attack)
            {
                origin_x = phy_position_x;
                origin_y = phy_position_y;
            }
            break;
        }
        
        case 4:
        if(magic &gt;= 5)
        {
            attack = instance_create(phy_position_x + spawn_x, phy_position_y + spawn_y, obj_attack_lightning);
            magic -= 5;
            with(attack)
            {
                origin_x = phy_position_x;
                origin_y = phy_position_y;
            }
            break;
        }
    }
    
    with(attack)
    {
        force_x = lengthdir_x(force, other.dir);
        force_y = lengthdir_y(force, other.dir);
        
        phy_rotation = -other.dir;
        physics_apply_impulse(x, y, force_x, force_y);
    }
}
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Inventory user input


if(inv_show == true)
{
    if(8 &lt;= ((mouse_x -view_xview) *2) &amp;&amp; ((mouse_x -view_xview) *2) &lt;= 648)
    {
        //Item 0
        if(174 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 200)
        {
            inv_select = 0;
            inv_slot_selected = true;
            inv_preview_y = 174;
        }
        //Item 1
        if(201 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 227)
        {
            inv_select = 1;
            inv_slot_selected = true;
            inv_preview_y = 201;
        }
        //Item 2
        if(228 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 254)
        {
            inv_select = 2;
            inv_slot_selected = true;
            inv_preview_y = 228;
        }
        //Item 3
        if(255 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 281)
        {
            inv_select = 3;
            inv_slot_selected = true;
            inv_preview_y = 255;
        }
        //Item 4
        if(282 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 308)
        {
            inv_select = 4;
            inv_slot_selected = true;
            inv_preview_y = 282;
        }
        //Item 5
        if(309 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 335)
        {
            inv_select = 5;
            inv_slot_selected = true;
            inv_preview_y = 309;
        }
        //Item 6
        if(336 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 362)
        {
            inv_select = 6;
            inv_slot_selected = true;
            inv_preview_y = 336;
        }
        //Item 7
        if(363 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 389)
        {
            inv_select = 7;
            inv_slot_selected = true;
            inv_preview_y = 363;
        }
        //Item 8
        if(390 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 416)
        {
            inv_select = 8;
            inv_slot_selected = true;
            inv_preview_y = 390;
        }
        //Item 9
        if(417 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 443)
        {
            inv_select = 9;
            inv_slot_selected = true;
            inv_preview_y = 417;
        }
        //Item 10
        if(444 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 470)
        {
            inv_select = 10;
            inv_slot_selected = true;
            inv_preview_y = 444;
        }
        //Item 11
        if(471 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 497)
        {
            inv_select = 11;
            inv_slot_selected = true;
            inv_preview_y = 471;
        }
        //Item 12
        if(498 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 524)
        {
            inv_select = 12;
            inv_slot_selected = true;
            inv_preview_y = 498;
        }
        //Item 13
        if(525 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 551)
        {
            inv_select = 13;
            inv_slot_selected = true;
            inv_preview_y = 525;
        }
        //Item 14
        if(552 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 578)
        {
            inv_select = 14;
            inv_slot_selected = true;
            inv_preview_y = 552;
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="52">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Debug damage popup

if(general_timer = true)
{
    with(instance_create(x, y, obj_damage_popup))
    {
        damage_popup = "Debug!";
        character = other.id;
    }
    
    global.message_big1 = "Everfree Forest";
    global.message_big2 = true;
    global.message_big_x = 640;
    global.message_big_y = 40;
    
    alarm[10] = 30;
    general_timer = false;
}

//Debugging justifies cheating
hp = max_hp
stamina = max_stamina
magic = max_magic
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="12">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Handle respawn

//Variables reset
hp = max_hp;
magic = max_magic;
stamina = max_stamina;

//Stop status effects
status_effect1 = "";
effect1_counter = 0;
status_effect2 = "";
effect2_counter = 0;
    
//Warp event script
global.dest_x = dest_x;
global.dest_y = dest_y;
room_goto(dest_room);

//Reduce money
if(money &gt;= 10)
{
    money -= 10;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Message database

switch(msg_pony)
{
    case 0:     //Nopony
    show_debug_message("Default pony selected.");
    msg[msg_case, 0] = 5;                    //Length of whole conversation
    msg[msg_case, 1] = spr_inv_test;         //Sprite 1st message
    msg[msg_case, 2] = "No message (1).";    //1st message
    msg[msg_case, 3] = spr_inv_test;         //Sprite 2nd message
    msg[msg_case, 4] = "No message (2).";    //2nd message
    msg[msg_case, 5] = spr_inv_test;         //Sprite 3rd message
    msg[msg_case, 6] = "No message (3).";    //3nd message
    msg[msg_case, 7] = spr_inv_test;         //Sprite 4th message
    msg[msg_case, 8] = "No message (4).";    //4th message
    msg[msg_case, 9] = spr_inv_test;         //Sprite 5th message
    msg[msg_case, 10] = "No message (5).";   //5th message
    break;
    
    case 1:                 //Cobalt Shade
    if(msg_conv == 0)
    {
        if(msg_case == 0)   //Error
        {
            msg[0, 0] = 3;
            msg[0, 1] = spr_cobalt_right;
            msg[0, 2] = "Error message! Something was apparently not set...";
            msg[0, 3] = global.character_right;
            msg[0, 4] = "Dumb developers, right?";
            msg[0, 5] = spr_cobalt_right;
            msg[0, 6] = "No, it is just hard to keep an eye on everything that could break.#Lewis is a shit if he changes the database.";
        }
        if(msg_case == 1)   //Offer
        {
            msg[0, 0] = 3;
            msg[0, 1] = spr_cobalt_right;
            msg[0, 2] = "Hey sexy. If you find my shades of cobalt we can find#somewhere more private for me to give you your reward.";
            msg[0, 3] = global.character_right;
            msg[0, 4] = "Alright. Sounds fun, I think...?";
            msg[0, 5] = spr_cobalt_right;
            msg[0, 6] = "You want it. I can see that in your eyes.";
        }
        if(msg_case == 2)   //Offer success
        {
            msg[0, 0] = 1;
            msg[0, 1] = spr_cobalt_right;
            msg[0, 2] = "Great. Thank you for your help!";
        }
        if(msg_case == 3)   //Offer denial
        {
            msg[0, 0] = 1;
            msg[0, 1] = spr_cobalt_right;
            msg[0, 2] = "Aww, alright then. See you next time then!";
        }
        if(msg_case == 4)   //Uncompleted
        {
            msg[0, 0] = 2;
            msg[0, 1] = spr_cobalt_right;
            msg[0, 2] = "You haven't got my cobalt shades yet. Bring the#cobalt shades to me and I'll give you your reward.";
            msg[0, 3] = global.character_right;
            msg[0, 4] = "Ok. I will get them.";
        }
        if(msg_case == 5)   //Success
        {
            msg[0, 0] = 3;
            msg[0, 1] = spr_cobalt_right;
            msg[0, 2] = "Great, you found my cobalt shades. Now, about your reward...";
            msg[0, 3] = global.character_right;
            msg[0, 4] = "I came solid blocks of cobalt!";
            msg[0, 5] = spr_cobalt_right;
            msg[0, 6] = "It is me, surprise! In which way shall I please you, master?";
        }
        if(msg_case == 6)   //No quests
        {
            msg[0, 0] = 2;
            msg[0, 1] = spr_cobalt_right;
            msg[0, 2] = "Sorry, I don't have a quest for you at the moment.#Check back at night. Screeeee!";
            msg[0, 3] = global.character_right;
            msg[0, 4] = "I will surely come back later.";
        }
        if(msg_case == 7)   //No space
        {
            msg[0, 0] = 1;
            msg[0, 1] = spr_cobalt_right;
            msg[0, 2] = "Sorry, it seems that you already have enough quests.#Come back after you have finished some.";
        }
    }
    break;
    
    case 2:                 //Applejack
    if(msg_conv == 0)
    {
        if(msg_case == 0)   //Error
        {
            msg[0, 0] = 3;
            msg[0, 1] = spr_applejack_right;
            msg[0, 2] = "Error message! Something was apparently not set...";
            msg[0, 3] = global.character_right;
            msg[0, 4] = "Dumb developers, right?";
            msg[0, 5] = spr_applejack_right;
            msg[0, 6] = "No, it is just hard to keep an eye on everything that could break.";
        }
        if(msg_case == 1)   //Offer
        {
            msg[0, 0] = 1;
            msg[0, 1] = spr_applejack_right;
            msg[0, 2] = "Hey, ya! I need a flower, because... ehm, 'cause why not!#Don't question me, I'm just an NPC!";
        }
        if(msg_case == 2)   //Offer success
        {
            msg[0, 0] = 1;
            msg[0, 1] = spr_applejack_right;
            msg[0, 2] = "Yeehaw, I knew that I can count on ya!";
        }
        if(msg_case == 3)   //Offer denial
        {
            msg[0, 0] = 1;
            msg[0, 1] = spr_applejack_right;
            msg[0, 2] = "Darn, I was so sure you could do it..";
        }
        if(msg_case == 4)   //Uncompleted
        {
            msg[0, 0] = 2;
            msg[0, 1] = spr_applejack_right;
            msg[0, 2] = "I still need that flower, which I definitely cannot pick up.#Please, bring it to me.";
            msg[0, 3] = global.character_right;
            msg[0, 4] = "Ok. I am on my way.";
        }
        if(msg_case == 5)   //Success
        {
            msg[0, 0] = 3;
            msg[0, 1] = spr_applejack_right;
            msg[0, 2] = "Yeehaw, you found it! Your reward is...";
            msg[0, 3] = global.character_right;
            msg[0, 4] = "Yes? It is?";
            msg[0, 5] = spr_applejack_right;
            msg[0, 6] = "...muh dick - suprise!";
        }
        if(msg_case == 6)   //No quests
        {
            msg[0, 0] = 2;
            msg[0, 1] = spr_applejack_right;
            msg[0, 2] = "Sorry partner, but I don't have other things for you to do,#like killing Rarity.";
            msg[0, 3] = global.character_right;
            msg[0, 4] = "Alright, goodbye.";
        }
        if(msg_case == 7)   //No space
        {
            msg[0, 0] = 1;
            msg[0, 1] = spr_applejack_right;
            msg[0, 2] = "Sorry, it seems that you already have enough quests.#Come back after you have finished some.";
        }
    }
    break;
    
    case 3:  //Trixie Lulamoon
    if(msg_conv == 0)
    {
        if(msg_case == 0)   //Error
        {
            msg[0, 0] = 3;
            msg[0, 1] = spr_trixie_right;
            msg[0, 2] = "Error message! Something was apparently not set...";
            msg[0, 3] = global.character_right;
            msg[0, 4] = "Dumb developers, right?";
            msg[0, 5] = spr_trixie_right;
            msg[0, 6] = "No, it is just hard to keep an eye on everything that could break.";
        }
        if(msg_case == 6)   //No quests
        {
            msg[0, 0] = 4;
            msg[0, 1] = spr_trixie_right;
            msg[0, 2] = "Hello " + string(global.player_name) + "!#You really want to drink milk from an equine?";
            msg[0, 3] = spr_trixie_right;
            msg[0, 4] = "Are you sure you want my milk?";
            msg[0, 5] = global.character_right;
            msg[0, 6] = "Yes, I am.";
            msg[0, 7] = spr_trixie_right;
            msg[0, 8] = "You are disgusting, " + string(global.player_name) +".";
        }
        if(msg_case == 7)   //No space
        {
            msg[0, 0] = 1;
            msg[0, 1] = spr_trixie_right;
            msg[0, 2] = "Sorry, it seems that you already have enough quests.#Come back after you have finished some.";
        }
    }
    break;
    
    case 4:  //Derpy
    if(msg_conv == 0)
    {
        if(msg_case == 0)   //Error
        {
            msg[0, 0] = 3;
            msg[0, 1] = spr_derpy_right;
            msg[0, 2] = "Error message! Something was apparently not set...";
            msg[0, 3] = global.character_right;
            msg[0, 4] = "Dumb developers, right?";
            msg[0, 5] = spr_derpy_right;
            msg[0, 6] = "No, it is just hard to keep an eye on everything that could break.";
        }
        if(msg_case == 6)   //No quests
        {
            msg[0, 0] = 1;
            msg[0, 1] = spr_derpy_right;
            msg[0, 2] = "I am mentally retarded.";
        }
        if(msg_case == 7)   //No space
        {
            msg[0, 0] = 1;
            msg[0, 1] = spr_derpy_right;
            msg[0, 2] = "Sorry, it seems that you already have enough quests.#Come back after you have finished some.";
        }
    }
    break;
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Window messages

if(text_loop &gt; msg[0, 0])   //If last message is reached
{
    with(obj_window_base)   //Destroy window after last message
    {
        event_user(1);
    }
    
    text_loop = 0;
    show_debug_message("Delete window.");
}
else
{
    switch(text_loop)   //Switch through messages
    {
        case 1:  //Message 1
        with(instance_create(200, 520, obj_window_base))  //Create 1st message window
        {
            image_xscale = 12;
            image_yscale = 3;
            window_speaker  = other.msg[0, 1];
            window_message1 = other.msg[0, 2];
            
            event_user(0);
            show_debug_message("Setup for window done.");
        }
        
        show_debug_message("Message 1")
        break;
        
        case 2:  //Message 2
        with(obj_window_base)
        {
            window_speaker  = other.msg[0, 3];
            window_message1 = other.msg[0, 4];
            event_user(0);
        }
        
        show_debug_message("Message 2");
        break;
        
        case 3:  //Message 3
        with(obj_window_base)
        {
            window_speaker  = other.msg[0, 5];
            window_message1 = other.msg[0, 6];
            event_user(0);
        }
        
        show_debug_message("Message 3");
        break;
        
        case 4:  //Message 4
        with(obj_window_base)
        {
            window_speaker  = other.msg[0, 7];
            window_message1 = other.msg[0, 8];
            event_user(0);
        }
        
        show_debug_message("Message 4");
        break;
        
        case 5:  //Message 5
        with(obj_window_base)
        {
            window_speaker  = other.msg[0, 9];
            window_message1 = other.msg[0, 10];
            event_user(0);
        }
        
        show_debug_message("Message 5");
        break; 
    }
}

if(text_loop &gt; (msg[0, 0] -1))  //If last message is shown -&gt; lock
{
if(msg_case = 1)                //-&gt; Only for offer cases
{
if(q_success = true)            //-&gt; Only if quest space is there
{
    with(instance_create(1000, 530, obj_button_yesno))   //Create "Yes" button
    {
        name = "Yes";
    }
    with(instance_create(1000, 630, obj_button_yesno))   //Create "No" button
    {
        name = "No";
    }

    with(obj_window_base)       //Lock window (decision has to be done)
    {
        locked = true;
    }
    
    q_success = false;
    show_debug_message("Window locked now.");
}
}
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Inventory + quests

if(inv_quest == 0)
{
    var inv_assigned = false;
    
    //Inventory
    var p_runs = 0;
    while(inv_assigned == false &amp;&amp; p_runs &lt; 15)             //p_runs &lt; NUMBER -&gt; space in inv
    {
        if(global.items[p_runs,0] == "")
        {
            if(weight + global.pickup4 &lt;= weight_limit)
            {
                global.items[p_runs,0] = global.pickup0;    //Name
                global.items[p_runs,1] = global.pickup1;    //Description
                global.items[p_runs,2] = global.pickup2;    //Type
                global.items[p_runs,3] = global.pickup3;    //Sprite
                global.items[p_runs,4] = global.pickup4;    //Weight
                global.items[p_runs,5] = global.pickup5;    //Price
                global.items[p_runs,6] = global.pickup6;    //Value 1
                global.items[p_runs,7] = global.pickup7;    //Value 2
                global.items[p_runs,8] = global.pickup8;    //Value 3
                
                weight = weight + global.pickup4;           //Weight calculation
                
                with(obj_items)                             //Gives item success answer
                {
                    p_target = global.pickup0;
                    p_success = 1;
                   event_user(0);
                }
                
                show_debug_message("Item pickup assignment " + string(p_runs) + ".");
            }
            
            inv_assigned = true;                            //End loop
        }
        else                                                //Next inv slot check
        {
            p_runs += 1;
        }
    }
    
    if(p_runs == 15)                            //To be changed into 25 again
    {
        with(obj_items)                         //Gives item failure answer
        {
            p_target = global.pickup0;
            p_success = 2;
            event_user(0);
        }
        
        p_runs = 0;
    }
    
    if(weight + global.pickup4 &gt; weight_limit)  //If item was too heavy
    {
        with(obj_items)                         //Gives item failure answer
        {
            p_target = global.pickup0;
            p_success = 2;
            event_user(0);
        }
        
        p_runs = 0;
    }
}
else    //Quests
{
    var quest_assigned = false;
    
    q_decis_runs = 0;
    while(quest_assigned == false &amp;&amp; q_decis_runs &lt; 1)
    {
        if(global.quests[q_decis_runs,0] == "") //Enough space for quest
        {
            q_success = true;
            quest_assigned = true;  //End loop
        }
        else                        //Next quest slot check
        {
            q_decis_runs += 1;
        }
    }
    
    if(q_decis_runs == 1)           //1 = Maximum amount
    {
        with(obj_NPC_base1)
        {
            q_target = other.quest1;//Make sure correct NPC launches code
            event_user(13);         //No space event
        }
        
        show_debug_message("Quest assignment no space.");
        q_decis_runs = 0;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Interface

//Health + Stamina bar
draw_healthbar(20, 20, 200, 30, hp/max_hp *100, c_black, c_red, c_red, 0, true, true);
draw_healthbar(20, 40, 200, 50, stamina/max_stamina *100, c_black, c_blue, c_blue, 0, true, true);

//Big Messages
draw_set_alpha(alpha_big1);
draw_set_halign(fa_center);
draw_set_font(font_big);
if(message_big_1a != "")
{
    draw_text(global.message_big_x, global.message_big_y, message_big_1a);
}

draw_set_font(font_eq);
draw_set_alpha(1);


//Magic bar
if(global.character_race == "unicorn")
{
    draw_healthbar(20, 60, 200, 70, magic/max_magic *100, c_black, c_purple, c_purple, 0, true, true);
}
else
{
    draw_set_valign(fa_top);
    draw_set_halign(0);
    if(global.character_race == "earthpony")
    {
        draw_text_ext(20, 100, "You are an " + string(global.character_race) + ".#You cannot use spells!", 20, -1);
    }
    else
    {
        draw_text_ext(20, 100, "You are a " + string(global.character_race) + ".#You cannot use spells!", 20, -1);
    }
}

//Health bar text
draw_set_valign(fa_middle);
draw_set_halign(fa_center);
draw_text((200-20)/2 +20, 20, string(hp) + "/" + string(max_hp));

//Attack type
draw_set_halign(0);
draw_text(20, 80, "attack_type: " + string(attack_type));

//Status effects
if(status_effect1 != "")
{
    switch(status_effect1)
    {
        case "burning":
        draw_text(20, 170, "Burning " + string(effect_burn_length - effect1_counter) + "s remaining");
        break;
        
        case "slowness":
        draw_text(20, 170, "Slowness " + string(effect_slow_length - effect1_counter) + "s remaining");
        break;
        
        case "exhausted":
        draw_text(20, 170, "Exhaustion " + string(effect_exhausted_length - effect1_counter) + "s remaining");
        break;
    }
}

if(status_effect2 != "")
{
    switch(status_effect2)
    {
        case "burning":
        draw_text(20, 190, "Burning " + string(effect_burn_length - effect2_counter) + "s remaining");
        break;
        
        case "slowness":
        draw_text(20, 190, "Slowness " + string(effect_slow_length - effect2_counter) + "s remaining");
        break;
        
        case "exhausted":
        draw_text(20, 190, "Exhaustion " + string(effect_exhausted_length - effect2_counter) + "s remaining");
        break;
    }
}

//Quest screen
if(quest_show == true)
{
if(inv_show == false)
{
    draw_set_halign(fa_center);
    draw_set_alpha(0.3);
    draw_set_colour(c_black);
    draw_rectangle(0, 0, 1280, 720, false);
    
    draw_set_alpha(0.5);
    draw_set_colour(c_white);
    draw_rectangle(640 -150, 200 -30, 640 +150, 200 +200 +30, false);
    
    draw_set_alpha(1);
    draw_set_colour(c_black);
    draw_text(640, 200, "Running Quests");
    
    for(i = 0; i &lt;= (5 -1); i += 1)    //5 = space for quests
    {
        draw_text(640, 230 + 20 *i, global.quests[i,0]);
    }
    
    draw_set_colour(c_white);
    draw_set_halign(fa_right);
    draw_text(1280 - 20, 20, "Limit of quests/same time: 5 (Currently just 1 due to testing).");
    
    draw_set_halign(fa_left);
}
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Inventory 2.0

if(inv_show == true)
{
if(quest_show == false)
{
    //Blacken screen
    draw_set_alpha(0.5);
    draw_set_colour(c_black);
    draw_rectangle(0, 0, 1280, 720, false);
    
    //Black outlines
    draw_set_alpha(1);
    draw_set_colour(c_black);
    draw_rectangle(7, 7, 649, 720 -7, false);           //Inventory box
    draw_rectangle(658, 7, 1280 -7, 356, false);        //Description box
    draw_rectangle(658, 365, 1280 -7, 720 -7, false);   //Comparison box
    
    //Interface pages
    draw_set_colour(make_color_rgb(214, 182, 135));
    draw_rectangle(8, 8, 648, 720 -8, false);           //Inventory box
    draw_rectangle(659, 8, 1280 -8, 355, false);        //Description box
    draw_rectangle(659, 366, 1280 -8, 720 -8, false);   //Comparison box
    
    //Above inventory
    draw_set_colour(c_black);
    draw_set_halign(fa_left);
    draw_set_valign(fa_top);
    draw_set_font(font_big);
    draw_text(75, 30, "Weapons");                       //Inventory page title
    draw_sprite(spr_arrow_left, 0, 25, 30);             //Left arrow
    draw_sprite(spr_arrow_right, 0, 400, 30);           //Left arrow
    
    draw_rectangle(7, 105, 647, 106, false);            //Horizontal line
    
    draw_sprite(spr_weight, 0, 500, 116);               //"Weight" symbol
    draw_sprite(spr_money, 0, 560, 130);                //"Price" symbol
    
    draw_set_font(font_eq);
    
    //Selection marker
    if(inv_slot_selected == true)
    {
        draw_set_alpha(0.5);
        draw_set_colour(c_blue);
        draw_rectangle(8, inv_preview_y, 648, inv_preview_y + 25, false);   //Selection marker
        
        //Description
        draw_set_alpha(1);
        draw_set_font(font_big);
        draw_set_colour(c_black);
        draw_text(680, 30, string(global.items[inv_select,0]));             //Name of selected item
        draw_set_font(font_desc);
        draw_text(950, 100, string(global.items[inv_select,1]));             //Description of selected item
        
        var size_x = sprite_get_width(global.items[inv_select,3]);          //Get sprite size
        draw_sprite_ext(global.items[inv_select,3], 0, 800, 200, 200 /size_x , 200 /size_x, 0, -1, 1); //Draw sprite in 250x250
    }
    
    
    //Inventory core
    draw_set_font(font_eq);
    draw_set_halign(fa_left);
    
    if(global.items[0,0] != "")     //Item 0
    {
        draw_text(50, 175, string(global.items[0,0]));  //Name
        draw_text(500, 175, string(global.items[0,4])); //Weight
        draw_text(580, 175, string(global.items[0,5])); //Price
    }
    if(global.items[1,0] != "")     //Item 1
    {
        draw_text(50, 175, "#" + string(global.items[1,0]));
        draw_text(500, 175, "#" + string(global.items[1,4]));
        draw_text(580, 175, "#" + string(global.items[1,5]));
    }
    if(global.items[2,0] != "")     //Item 2
    {
        draw_text(50, 175, "##" + string(global.items[2,0]));
        draw_text(500, 175, "##" + string(global.items[2,4]));
        draw_text(580, 175, "##" + string(global.items[2,5]));
    }
    if(global.items[3,0] != "")     //Item 3
    {
        draw_text(50, 175, "###" + string(global.items[3,0]));
        draw_text(500, 175, "###" + string(global.items[3,4]));
        draw_text(580, 175, "###" + string(global.items[3,5]));
    }
    if(global.items[4,0] != "")     //Item 4
    {
        draw_text(50, 175, "####" + string(global.items[4,0]));
        draw_text(500, 175, "####" + string(global.items[4,4]));
        draw_text(580, 175, "####" + string(global.items[4,5]));
    }
    if(global.items[5,0] != "")     //Item 5
    {
        draw_text(50, 175, "#####" + string(global.items[5,0]));
        draw_text(500, 175, "#####" + string(global.items[5,4]));
        draw_text(580, 175, "#####" + string(global.items[5,5]));
    }
    if(global.items[6,0] != "")     //Item 6
    {
        draw_text(50, 175, "######" + string(global.items[6,0]));
        draw_text(500, 175, "######" + string(global.items[6,4]));
        draw_text(580, 175, "######" + string(global.items[6,5]));
    }
    if(global.items[7,0] != "")     //Item 7
    {
        draw_text(50, 175, "#######" + string(global.items[7,0]));
        draw_text(500, 175, "#######" + string(global.items[7,4]));
        draw_text(580, 175, "#######" + string(global.items[7,5]));
    }
    if(global.items[8,0] != "")     //Item 8
    {
        draw_text(50, 175, "########" + string(global.items[8,0]));
        draw_text(500, 175, "########" + string(global.items[8,4]));
        draw_text(580, 175, "########" + string(global.items[8,5]));
    }
    if(global.items[9,0] != "")     //Item 9
    {
        draw_text(50, 175, "#########" + string(global.items[9,0]));
        draw_text(500, 175, "#########" + string(global.items[9,4]));
        draw_text(580, 175, "#########" + string(global.items[9,5]));
    }
    if(global.items[10,0] != "")    //Item 10
    {
        draw_text(50, 175, "##########" + string(global.items[10,0]));
        draw_text(500, 175, "##########" + string(global.items[10,4]));
        draw_text(580, 175, "##########" + string(global.items[10,5]));
    }
    if(global.items[11,0] != "")    //Item 11
    {
        draw_text(50, 175, "###########" + string(global.items[11,0]));
        draw_text(500, 175, "###########" + string(global.items[11,4]));
        draw_text(580, 175, "###########" + string(global.items[11,5]));
    }
    if(global.items[12,0] != "")    //Item 12
    {
        draw_text(50, 175, "############" + string(global.items[12,0]));
        draw_text(500, 175, "############" + string(global.items[12,4]));
        draw_text(580, 175, "############" + string(global.items[12,5]));
    }
    if(global.items[13,0] != "")    //Item 13
    {
        draw_text(50, 175, "#############" + string(global.items[13,0]));
        draw_text(500, 175, "#############" + string(global.items[13,4]));
        draw_text(580, 175, "#############" + string(global.items[13,5]));
    }
    if(global.items[14,0] != "")    //Item 14
    {
        draw_text(50, 175, "##############" + string(global.items[14,0]));
        draw_text(500, 175, "##############" + string(global.items[14,4]));
        draw_text(580, 175, "##############" + string(global.items[14,5]));
    }
    
    //Equiped quadrat
    switch(equip_0)
    {
        case 0:
        draw_sprite(spr_quadrat_gr1, 0, 20, 177);
        break;
        
        case 1:
        draw_sprite(spr_quadrat_gr1, 0, 20, 177 +27);
        break;
        
        case 2:
        draw_sprite(spr_quadrat_gr1, 0, 20, 177 +27*2);
        break;
        
        case 3:
        draw_sprite(spr_quadrat_gr1, 0, 20, 177 +27*3);
        break;
        
        case 4:
        draw_sprite(spr_quadrat_gr1, 0, 20, 177 +27*4);
        break;
        
        case 5:
        draw_sprite(spr_quadrat_gr1, 0, 20, 177 +27*5);
        break;
        
        case 6:
        draw_sprite(spr_quadrat_gr1, 0, 20, 177 +27*6);
        break;
        
        case 7:
        draw_sprite(spr_quadrat_gr1, 0, 20, 177 +27*7);
        break;
        
        case 8:
        draw_sprite(spr_quadrat_gr1, 0, 20, 177 +27*8);
        break;
        
        case 9:
        draw_sprite(spr_quadrat_gr1, 0, 20, 177 +27*9);
        break;
        
        case 10:
        draw_sprite(spr_quadrat_gr1, 0, 20, 177 +27*10);
        break;
        
        case 11:
        draw_sprite(spr_quadrat_gr1, 0, 20, 177 +27*11);
        break;
        
        case 12:
        draw_sprite(spr_quadrat_gr1, 0, 20, 177 +27*12);
        break;
        
        case 13:
        draw_sprite(spr_quadrat_gr1, 0, 20, 177 +27*13);
        break;
        
        case 14:
        draw_sprite(spr_quadrat_gr1, 0, 20, 177 +27*14);
        break;
    }
    
    //Below inventory
    draw_set_font(font_medium);
    draw_text(50, 610, "Weight: " + string(weight) + "kg of " + string(weight_limit) + "kg");
    
    //Command information box
    draw_rectangle(8, 660, 648, 720 -8, false);
    draw_set_font(font_eq);
    draw_set_colour(c_white);
    draw_text(20, 675, "[E] Equip      [RMB] Switch weapon group      [Q] Delete item");
    
    //External information (to be deleted later)
    draw_set_halign(fa_right);
    draw_text(1280 - 20, 20, "Available Slots: 25. | Mouse x: " + string((mouse_x -view_xview) *2));
    draw_text(1280 - 20, 40, "Money: " + string(money) + ". | Mouse y: " + string((mouse_y -view_yview) *2));
}
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Information dialog system

draw_set_halign(0);
draw_set_alpha(alpha1);

if(inv_show == false)
{
    draw_set_colour(c_white);
}
else
{
    draw_set_colour(c_black);
}

if(message_1a != "")
{
    draw_text(20, 500, message_1a);
}

draw_set_alpha(alpha2);
if(message_2a != "")
{
    draw_text(20, 520, message_2a);
}

draw_set_alpha(alpha3);
if(message_3a != "")
{
    draw_text(20, 540, message_3a);
}

draw_set_alpha(1);  //Prevent other drawn objects from being vanished
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Physics

draw_set_colour(c_white);
physics_draw_debug();
draw_self();

draw_circle(x, y, 50, true);

//Line from player to cursor
draw_line(phy_position_x, phy_position_y, mouse_x, mouse_y);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="81">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Delete item in inventory

if(inv_show == true)
{
if(inv_slot_selected = true)
{
    weight = weight - global.items[inv_select,4];   //Remove weight
    
    global.items[inv_select,0] = "";        //Name
    global.items[inv_select,1] = "";        //Description
    global.items[inv_select,2] = 0;         //Type
    global.items[inv_select,3] = spr_none;  //Sprite
    global.items[inv_select,4] = 0;         //Weight
    global.items[inv_select,5] = 0;         //Price
    
    equip_0 = -1;
}
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="69">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Equip item in inventory

if(inv_show == true)
{
if(inv_slot_selected = true)
{
if(global.items[inv_select,0] != "")
{
    switch(global.items[inv_select,2])
    {
        case 0: //Weapon -&gt; equip
        equip_0 = inv_select;
        break;
        
        case 1: //Armour -&gt; equip
        equip_0 = inv_select;
        break;
        
        case 2: //Shield -&gt; equip
        equip_0 = inv_select;
        break;
        
        case 3: //Ammonition -&gt; equip
        equip_0 = inv_select;
        break;
        
        case 4: //Potion -&gt; use
        if(global.items[inv_select,6] == "heal")
        {
            if(max_hp - hp &gt;= global.items[inv_select,7])   //If health is low
            {
                hp = hp + global.items[inv_select,7];       //Fill health a bit
                
                global.items[inv_select,0] = "";            //Delete item
                global.items[inv_select,1] = "";
                global.items[inv_select,2] = -1;
                global.items[inv_select,3] = spr_none;
                global.items[inv_select,4] = 0;
                global.items[inv_select,5] = 0;
            }
            else
            {
                if(hp == max_hp)    //Give player information that already full health
                {
                    global.message1 = "You already have full health.";
                    global.message2 = true;
                }
                else
                {
                    hp = max_hp;                            //Fill up to full health
                    
                    global.items[inv_select,0] = "";        //Delete item
                    global.items[inv_select,1] = "";
                    global.items[inv_select,2] = -1;
                    global.items[inv_select,3] = spr_none;
                    global.items[inv_select,4] = 0;
                    global.items[inv_select,5] = 0;
                }
            }
        }
        
        break;
    }
}
}
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>-1</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.100000001490116</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>100</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>10000</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>24,25</point>
    <point>19,25</point>
  </PhysicsShapePoints>
</object>
