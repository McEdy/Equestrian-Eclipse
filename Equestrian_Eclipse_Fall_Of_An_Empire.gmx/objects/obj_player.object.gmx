<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_trixie_down</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>-1</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Setup

phy_fixed_rotation = true;
sprite_index = global.character_right;

//Variables
action = false;
attack_type = 1;
notme = true;
interaction_delay = false;
popup_test_timer = true;

message_1a = "";    //Message 1 content
message_1b = false; //Message 1 start timer
message_1c = false; //Message 1 to be stopped
message_2a = "";
message_2b = false;
message_2c = false;
message_3a = "";
message_3b = false;
message_3c = false;

message_big_1a = "";
message_big_1b = "";
message_big_1c = "";

alpha1 = 1;
alpha2 = 1;
alpha3 = 1;

alpha_big1 = 1;

inv_display = 0;        //Slot number for display
inv_quest = 0;          //Choice if inventory or quest assignment (0 = inv, other = quest);
inv_show = false;
inv_assigned = false;
inv_slot_selected = false;
inv_preview_x = 0;
inv_preview_y = 0;
quest_show = false;
quest_show_prepare = false;

quest_assigned = false;

//Status
max_hp = 10;
hp = max_hp;

max_stamina = 30;
stamina = max_stamina;

max_magic = 30;
magic = max_magic;

//Inventory
for(var i = 99; i &gt; -1; i--;)
{
    global.items[i,0] = "";
    global.items[i,1] = "";
    global.items[i,2] = "";
    global.items[i,3] = "";
    global.items[i,4] = spr_none;
}

show_debug_message("Inventory array finished.");

//Quests
for(var i = 5; i &gt; -1; i--;)
{
    global.quests[i,0] = "";
}

show_debug_message("Quest array finished.");
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Respawn

/*dest_x = 272;
dest_y = 112;

respawn_room = rm_test;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Popup test

popup_test_timer = true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Message Big 1

alpha_big1 = 0.95;
message_big_1c = true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Message 3

alpha3 = 0.95;
message_3c = true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Message 2

alpha2 = 0.95;
message_2c = true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Message 1

alpha1 = 0.95;
message_1c = true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Depth

depth = (phy_position_y - 15) * -1;
phy_fixed_rotation = true;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Handle Input

if(keyboard_check(ord("A")))
{
    sprite_index = global.character_left;

    if(keyboard_check(vk_shift) &amp;&amp; stamina &gt; 0)
    {
        phy_position_x -= 3;
        stamina -= 2/60;
        status_running = true;
    }
    else
    {
        phy_position_x -= 2;
    }
}

if(keyboard_check(ord("D")))
{
    sprite_index = global.character_right;

    if(keyboard_check(vk_shift) &amp;&amp; stamina &gt; 0)
    {
        phy_position_x += 3;
        stamina -= 2/60;
        status_running = true;
    }
    else
    {
        phy_position_x += 2;
    }
}

if(keyboard_check(ord("W")))
{
    sprite_index = global.character_up;

    if(keyboard_check(vk_shift) &amp;&amp; stamina &gt; 0)
    {
        phy_position_y -= 3;
        stamina -= 2/60;
        status_running = true;
    }
    else
    {
        phy_position_y -= 2;
    }
}

status_running = false;

if(keyboard_check(ord("S")))
{
    sprite_index = global.character_down;

    if(keyboard_check(vk_shift) &amp;&amp; stamina &gt; 0)
    {
        phy_position_y += 3;
        stamina -= 2/60;
        status_running = true;
    }
    else
    {
        phy_position_y += 2;
    }
}

//Stamina regeneration
if(status_running == false)
{
if(stamina &lt; max_stamina)
{
    stamina += 1/60;
}
}

//Magic regeneration
if(magic &lt; max_magic)
{
    magic += 1/60;
}

//Inventory
if(keyboard_check_released(vk_tab))
{
if(inv_show_prepare == true)
{
    if(inv_show == false)
    {
        inv_show = true;
        inv_slot_selected = false;
        cursor_sprite = spr_cursor_normal;
    }
    else
    {
        inv_show = false;
        inv_slot_selected = false;
        cursor_sprite = spr_cursor_aiming;
    }
}
}

if(keyboard_check(vk_tab))
{
    inv_show_prepare = true;
}
else
{
    inv_show_prepare = false;
}

//Quest screen
if(keyboard_check_released(ord("Q")))
{
if(quest_show_prepare == true)
{
    if(quest_show == false)
    {
        quest_show = true;
    }
    else
    {
        quest_show = false;
    }
}
}

if(keyboard_check(ord("Q")))
{
    quest_show_prepare = true;
}
else
{
    quest_show_prepare = false;
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Display
//Display interactables

obj_closest = instance_nearest(x,y,obj_interactable);
dist_interact = point_distance(phy_position_x, phy_position_y, obj_closest.x, obj_closest.y);

if(obj_closest.active == true)
{
    if(dist_interact &lt; 50)
    {
        obj_bubble.active = true;
        obj_bubble.x = obj_closest.x;
        obj_bubble.y = obj_closest.y - 20;
    }
    else
    {
        obj_bubble.active = false;
    }
}
else
{
    obj_bubble.active = false;
}

//Message assignment
if(global.message2 == true)
{
    if(message_1a == "")
    {
        message_1a = global.message1;
        message_1b = true;
        show_debug_message("Message assignment 1.");
    }
    else
    {
        if(message_2a == "")
        {
            message_2a = global.message1;
            message_2b = true;
            show_debug_message("Message assignment 2.");
        }
        else
        {
            if(message_3a == "")
            {
                message_3a = global.message1;
                message_3b = true;
                show_debug_message("Message assignment 3.");
            }
            else
            {
                message_1a = global.message1;
                message_1b = true;
                show_debug_message("Message assignment O.");
            }
        }
    }
}

//Timer for message
if(message_1a != "" &amp;&amp; message_1b == true)
{
    show_debug_message("Message: " + message_1a);
    alarm[0] = 120;
    message_1b = false;
    global.message2 = false;
}

if(message_2a != "" &amp;&amp; message_2b == true)
{
    show_debug_message("Message: " + message_2a);
    alarm[1] = 120;
    message_2b = false;
    global.message2 = false;
}

if(message_3a != "" &amp;&amp; message_3b == true)
{
    show_debug_message("Message: " + message_3a);
    alarm[2] = 120;
    message_3b = false;
    global.message2 = false;
}

//Fade out
if(alpha1 &lt; 1 &amp;&amp; alpha1 &gt; 0)
{
    alpha1 -= 0.05;
}

if(alpha2 &lt; 1 &amp;&amp; alpha2 &gt; 0)
{
    alpha2 -= 0.05;
}

if(alpha3 &lt; 1 &amp;&amp; alpha3 &gt; 0)
{
    alpha3 -= 0.05;
}

//Stop message
if(alpha1 == 0 &amp;&amp; message_1a != "" &amp;&amp; message_1c == true)
{
    message_1a = "";
    message_1c = false;
    alpha1 = 1;
    show_debug_message("Finished message loop 1.");
}

if(alpha2 == 0 &amp;&amp; message_2a != "" &amp;&amp; message_2c == true)
{
    message_2a = "";
    message_2c = false;
    alpha2 = 1;
    show_debug_message("Finished message loop 2.");
}

if(alpha2 == 0 &amp;&amp; message_3a != "" &amp;&amp; message_3c == true)
{
    message_3a = "";
    message_3c = false;
    alpha3 = 1;
    show_debug_message("Finished message loop 3.");
}

//Damage popup
if(global.damage_popup1 == true)
{
    with(instance_create(x, y, obj_damage_popup))
    {
        character = other.id;
        //damage_amount = string(global.damage_popup);
        global.damage_popup1 = false;
    }
}

//Show big text top middle
//Message assignment
if(global.message_big2 == true)
{
    if(message_big_1a == "")
    {
        message_big_1a = global.message_big1;
        message_big_1b = true;
        show_debug_message("Message assignment (big) 1.");
    }
    else
    {
        message_big_1a = global.message_big1;
        message_big_1b = true;
        show_debug_message("Message assignment (big) O.");
    }
}

//Timer for message
if(message_big_1a != "" &amp;&amp; message_big_1b == true)
{
    show_debug_message("Message: " + message_big_1a);
    alarm[3] = 120;
    message_big_1b = false;
    global.message_big2 = false;
}


//Fade out
if(alpha_big1 &lt; 1 &amp;&amp; alpha_big1 &gt; 0)
{
    alpha_big1 -= 0.05;
}


//Stop message
if(alpha_big1 == 0 &amp;&amp; message_big_1a != "" &amp;&amp; message_big_1c == true)
{
    message_big_1a = "";
    message_big_1c = false;
    alpha_big1 = 1;
    show_debug_message("Finished message (big) loop 1.");
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Miscellaneous

/*
if(hp &lt; 0)
    global.dest_x = dest_x;
    global.dest_y = dest_y;

    room_goto(respawn_room);
*/

//instance_deactivate_region(view_xview[0], view_yview[0], view_wview[0], view_hview[0], false, true);
instance_deactivate_region(0, 0, room_width, room_height, false, true);
//instance_activate_region(view_xview[1], view_yview[1], view_wview[1], view_hview[1], true);
instance_activate_region(view_xview[0] -150, view_yview[0] -150, view_wview[0] +150, view_hview[0] +150, true);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_NPC_base1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Collide With
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_obstacles">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Collide With
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="54">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Switch Attack Type

if(attack_type == 1)
{
    attack_type = 2;
    global.message1 = "Fire: Range low, Damage high.";
    global.message2 = true;
}
else
{
    if(attack_type == 2)
    {
        attack_type = 3;
        global.message1 = "Ice: Range medium, Damage medium.";
        global.message2 = true;
    }
    else
    {
        if(attack_type == 3)
        {
            attack_type = 4;
            global.message1 = "Lightning: Range very high, Damage low.";
            global.message2 = true;
        }
        else
        {
            attack_type = 1;
            global.message1 = "Energy: Range very low, Damage very high.";
            global.message2 = true;
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="53">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Magic

dir = point_direction(phy_position_x, phy_position_y, mouse_x, mouse_y);
spawn_x = lengthdir_x(25, dir);
spawn_y = lengthdir_y(25, dir);

if(inv_show == false &amp;&amp; quest_show == false)
{
if(global.character_race == "unicorn")
{
    switch(attack_type)
    {
        case 1:
        if(magic &gt;= 5)
        {
            attack = instance_create(phy_position_x + spawn_x, phy_position_y + spawn_y, obj_attack_magic);
            magic -= 5;
            with(attack)
            {
                origin_x = phy_position_x;
                origin_y = phy_position_y;
            }
            break;
        }
        
        case 2:
        if(magic &gt;= 5)
        {
            attack = instance_create(phy_position_x + spawn_x, phy_position_y + spawn_y, obj_attack_fire);
            magic -= 5;
            with(attack)
            {
                origin_x = phy_position_x;
                origin_y = phy_position_y;
            }
            break;
        }
        
        case 3:
        if(magic &gt;= 5)
        {
            attack = instance_create(phy_position_x + spawn_x, phy_position_y + spawn_y, obj_attack_ice);
            magic -= 5;
            with(attack)
            {
                origin_x = phy_position_x;
                origin_y = phy_position_y;
            }
            break;
        }
        
        case 4:
        if(magic &gt;= 5)
        {
            attack = instance_create(phy_position_x + spawn_x, phy_position_y + spawn_y, obj_attack_lightning);
            magic -= 5;
            with(attack)
            {
                origin_x = phy_position_x;
                origin_y = phy_position_y;
            }
            break;
        }
    }
    
    with(attack)
    {
        force_x = lengthdir_x(force, other.dir);
        force_y = lengthdir_y(force, other.dir);
        
        phy_rotation = -other.dir;
        physics_apply_impulse(x, y, force_x, force_y);
    }
}
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Inventory user input

if(inv_show == true)
{
    //Column 1
    if(640 +70 &lt;= ((mouse_x -view_xview) *2) &amp;&amp; ((mouse_x -view_xview) *2) &lt;= 640 +70+100)
    {
        //Slot 0
        if(150 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 250)
        {
            inv_display = 0;
            inv_slot_selected = true;
            inv_preview_x = 640 +70;
            inv_preview_y = 150;
        }
        //Slot 1
        if(250 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 350)
        {
            inv_display = 1;
            inv_slot_selected = true;
            inv_preview_x = 640 +70;
            inv_preview_y = 250;
        }
        //Slot 2
        if(350 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 450)
        {
            inv_display = 2;
            inv_slot_selected = true;
            inv_preview_x = 640 +70;
            inv_preview_y = 350;
        }
        //Slot 3
        if(450 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 550)
        {
            inv_display = 3;
            inv_slot_selected = true;
            inv_preview_x = 640 +70;
            inv_preview_y = 450;
        }
        //Slot 4
        if(550 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 650)
        {
            inv_display = 4;
            inv_slot_selected = true;
            inv_preview_x = 640 +70;
            inv_preview_y = 550;
        }
    }
    
    //Column 2
    if(740 +70 &lt;= ((mouse_x -view_xview) *2) &amp;&amp; ((mouse_x -view_xview) *2) &lt;= 640 +70+200)
    {
        //Slot 5
        if(150 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 250)
        {
            inv_display = 5;
            inv_slot_selected = true;
            inv_preview_x = 740 +70;
            inv_preview_y = 150;
        }
        //Slot 6
        if(250 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 350)
        {
            inv_display = 6;
            inv_slot_selected = true;
            inv_preview_x = 740 +70;
            inv_preview_y = 250;
        }
        //Slot 7
        if(350 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 450)
        {
            inv_display = 7;
            inv_slot_selected = true;
            inv_preview_x = 740 +70;
            inv_preview_y = 350;
        }
        //Slot 8
        if(450 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 550)
        {
            inv_display = 8;
            inv_slot_selected = true;
            inv_preview_x = 740 +70;
            inv_preview_y = 450;
        }
        //Slot 9
        if(550 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 650)
        {
            inv_display = 9;
            inv_slot_selected = true;
            inv_preview_x = 740 +70;
            inv_preview_y = 550;
        }
    }
    
    //Column 3
    if(840 +70 &lt;= ((mouse_x -view_xview) *2) &amp;&amp; ((mouse_x -view_xview) *2) &lt;= 640 +70+300)
    {
        //Slot 10
        if(150 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 250)
        {
            inv_display = 10;
            inv_slot_selected = true;
            inv_preview_x = 840 +70;
            inv_preview_y = 150;
        }
        //Slot 11
        if(250 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 350)
        {
            inv_display = 11;
            inv_slot_selected = true;
            inv_preview_x = 840 +70;
            inv_preview_y = 250;
        }
        //Slot 12
        if(350 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 450)
        {
            inv_display = 12;
            inv_slot_selected = true;
            inv_preview_x = 840 +70;
            inv_preview_y = 350;
        }
        //Slot 13
        if(450 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 550)
        {
            inv_display = 13;
            inv_slot_selected = true;
            inv_preview_x = 840 +70;
            inv_preview_y = 450;
        }
        //Slot 14
        if(550 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 650)
        {
            inv_display = 14;
            inv_slot_selected = true;
            inv_preview_x = 840 +70;
            inv_preview_y = 550;
        }
    }
    
    //Column 4
    if(940 +70 &lt;= ((mouse_x -view_xview) *2) &amp;&amp; ((mouse_x -view_xview) *2) &lt;= 640 +70+400)
    {
        //Slot 15
        if(150 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 250)
        {
            inv_display = 15;
            inv_slot_selected = true;
            inv_preview_x = 940 +70;
            inv_preview_y = 150;
        }
        //Slot 16
        if(250 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 350)
        {
            inv_display = 16;
            inv_slot_selected = true;
            inv_preview_x = 940 +70;
            inv_preview_y = 250;
        }
        //Slot 17
        if(350 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 450)
        {
            inv_display = 17;
            inv_slot_selected = true;
            inv_preview_x = 940 +70;
            inv_preview_y = 350;
        }
        //Slot 18
        if(450 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 550)
        {
            inv_display = 18;
            inv_slot_selected = true;
            inv_preview_x = 940 +70;
            inv_preview_y = 450;
        }
        //Slot 19
        if(550 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 650)
        {
            inv_display = 19;
            inv_slot_selected = true;
            inv_preview_x = 940 +70;
            inv_preview_y = 550;
        }
    }
    
    //Column 5
    if(1040 +70 &lt;= ((mouse_x -view_xview) *2) &amp;&amp; ((mouse_x -view_xview) *2) &lt;= 640 +70+500)
    {
        //Slot 20
        if(150 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 250)
        {
            inv_display = 20;
            inv_slot_selected = true;
            inv_preview_x = 1040 +70;
            inv_preview_y = 150;
        }
        //Slot 21
        if(250 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 350)
        {
            inv_display = 21;
            inv_slot_selected = true;
            inv_preview_x = 1040 +70;
            inv_preview_y = 250;
        }
        //Slot 22
        if(350 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 450)
        {
            inv_display = 22;
            inv_slot_selected = true;
            inv_preview_x = 1040 +70;
            inv_preview_y = 350;
        }
        //Slot 23
        if(450 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 550)
        {
            inv_display = 23;
            inv_slot_selected = true;
            inv_preview_x = 1040 +70;
            inv_preview_y = 450;
        }
        //Slot 24
        if(550 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 650)
        {
            inv_display = 24;
            inv_slot_selected = true;
            inv_preview_x = 1040 +70;
            inv_preview_y = 550;
        }
    }
    
    if(inv_slot_selected == true)
    {
    if(640 +68-100 &lt;= ((mouse_x -view_xview) *2) &amp;&amp; ((mouse_x -view_xview) *2) &lt;= 640 +68)
    {
    if(720 -70-100 &lt;= ((mouse_y -view_yview) *2) &amp;&amp; ((mouse_y -view_yview) *2) &lt;= 720 -70)
    {
        global.items[inv_display,0] = "";
        global.items[inv_display,1] = "";
        global.items[inv_display,2] = "";
        global.items[inv_display,3] = "";
        global.items[inv_display,4] = spr_none;
        
        inv_slot_selected = false;
    }
    }
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="52">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Debug damage popup

if(popup_test_timer = true)
{
    with(instance_create(x, y, obj_damage_popup))
    {
        damage_popup = "Debug!";
        character = other.id;
    }
    
    with(obj_lantern)
    {
        if(sprite_index == spr_lantern_off)
        {
            sprite_index = spr_lantern_on;
        }
        else
        {
            sprite_index = spr_lantern_off;
        }
    }
    
    alarm[10] = 30;
    popup_test_timer = false;
    
    global.message_big1 = "Everfree Forest";
    global.message_big2 = true;
    global.message_big_x = 640;
    global.message_big_y = 40;
}

//Debugging justifies cheating
hp = max_hp
stamina = max_stamina
magic = max_magic
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Inventory + Quests

if(inv_quest == 0)
{
    //Inventory
    if(global.pickup_size == 1)
    {
        //Size = 1
        
        var i = 0;
        while(inv_assigned == false &amp;&amp; i &lt; 25)
        {
            if(global.items[i,0] == "")
            {
                global.items[i,0] = global.pickup1; //Name
                global.items[i,1] = global.pickup2; //Description
                global.items[i,2] = global.pickup3; //Type (Weapon, Armour, Status, Misc)
                global.items[i,3] = global.pickup4; //Price
                global.items[i,4] = global.pickup5; //Sprite
                
                global.pickup_b = true;
                global.pickup_target = global.pickup1;
                global.pickup_success = 1;
                
                show_debug_message("Item pickup assignment " + string(i) + " with size " + string(global.pickup_size) + ".");
                inv_assigned = true;
            }
            else
            {
                i += 1;
            }
        }
        if(i == 25)
        {
            global.pickup_b = true;
            global.pickup_target = global.pickup1;
            global.pickup_success = 2;
               
            show_debug_message("Item pickup assignment no space.");
            i = 0;
        }
    }
    else
    {
        //Size = 2
        
        var i = 0;
        while(inv_assigned == false &amp;&amp; i &lt; 25)
        {
            if(global.items[i,0] == "" &amp;&amp; global.items[i+1,0] == "")
            {
                global.items[i,0] = global.pickup1; //Name
                global.items[i,1] = global.pickup2; //Description
                global.items[i,2] = global.pickup3; //Type (Weapon, Armour, Status, Misc)
                global.items[i,3] = global.pickup4; //Price
                global.items[i,4] = global.pickup5; //Sprite
                
                global.items[i+1,0] = global.pickup1;
                global.items[i+1,1] = global.pickup2;
                global.items[i+1,2] = global.pickup3;
                global.items[i+1,3] = global.pickup4;
                global.items[i+1,4] = global.pickup5;
                
                global.pickup_b = true;
                global.pickup_target = global.pickup1;
                global.pickup_success = 1;
                
                show_debug_message("Item pickup assignment " + string(i) + " with size " + string(global.pickup_size) + ".");
                inv_assigned = true;
            }
            else
            {
                i += 2;
            }
        }
        if(i == 26)
        {
            global.pickup_b = true;
            global.pickup_target = global.pickup1;
            global.pickup_success = 2;
               
            show_debug_message("Item pickup assignment no space.");
            i = 0;
        }
    }
}
else
{
    //Quests
    
    var i = 0;
    while(quest_assigned == false &amp;&amp; i &lt; 1)
    {
        if(global.quests[i,0] == "")
        {
            global.quests[i,0] = global.quest1; //Quest name
            
            global.quest_b = true;
            global.quest_target = global.quest1;
            global.quest_success = 1;
            
            show_debug_message("Quest assignment " + string(i) + ".");
            quest_assigned = true;
        }
        else
        {
            i += 1;
        }
    }
    
    if(i == 1)  //Maximum amount
    {
        global.quest_b = true;
        global.quest_target = global.quest1;
        global.quest_success = 2;
        
        show_debug_message("Quest assignment no space.");
        i = 0;
    }
    else
    {
        i = 0;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Interface
//Health + Stamina bar
draw_healthbar(20, 20, 200, 30, hp/max_hp *100, c_black, c_red, c_red, 0, true, true);
draw_healthbar(20, 40, 200, 50, stamina/max_stamina *100, c_black, c_blue, c_blue, 0, true, true);


//Attack type (Debug)
draw_set_halign(0);
draw_text(20, 80, "attack_type: " + string(attack_type));

//Messages
draw_set_alpha(alpha1);
if(message_1a != "")
{
    draw_text(20, 500, message_1a);
}

draw_set_alpha(alpha2);
if(message_2a != "")
{
    draw_text(20, 520, message_2a);
}

draw_set_alpha(alpha3);
if(message_3a != "")
{
    draw_text(20, 540, message_3a);
}

//Big Messages
draw_set_alpha(alpha_big1);
draw_set_halign(fa_center);
draw_set_font(font_popup);
if(message_big_1a != "")
{
    draw_text(global.message_big_x, global.message_big_y, message_big_1a);
}

draw_set_font(font_eq);
draw_set_alpha(1);


//Magic bar
if(global.character_race == "unicorn")
{
    draw_healthbar(20, 60, 200, 70, magic/max_magic *100, c_black, c_purple, c_purple, 0, true, true);
}
else
{
    draw_set_valign(fa_top);
    draw_set_halign(0);
    if(global.character_race == "earthpony")
    {
        draw_text_ext(20, 100, "You are an " + string(global.character_race) + ".#You cannot use spells!", 20, -1);
    }
    else
    {
        draw_text_ext(20, 100, "You are a " + string(global.character_race) + ".#You cannot use spells!", 20, -1);
    }
}

//Health bar text
draw_set_valign(fa_middle);
draw_set_halign(fa_center);
draw_text((200-20)/2 +20, 20, string(hp) + "/" + string(max_hp));


//Quest screen
if(quest_show == true)
{
if(inv_show == false)
{
    draw_set_alpha(0.3);
    draw_set_colour(c_black);
    draw_rectangle(0, 0, 1280, 720, false);
    
    draw_set_alpha(0.5);
    draw_set_colour(c_white);
    draw_rectangle(640 -150, 200 -30, 640 +150, 200 +200 +30, false);
    
    draw_set_alpha(1);
    draw_set_colour(c_black);
    draw_text(640, 200, "Running Quests");
    
    for(i = 0; i &lt;= (5 -1); i += 1)    //5 = space in inventory
    {
        draw_text(640, 230 + 20 *i, global.quests[i,0]);
    }
    
    draw_set_colour(c_white);
    draw_set_halign(fa_right);
    draw_text(1280 - 20, 20, "Limit of quests/same time: 5 (Currently just 1 due to testing).");
    
    draw_set_halign(fa_left);
}
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Inventory
if(inv_show == true)
{
if(quest_show == false)
{
    //Blacken screen
    draw_set_alpha(0.5);
    draw_set_colour(c_black);
    draw_rectangle(0, 0, 1280, 720, false);
    
    //Grey box (background inventory)
    draw_set_alpha(1);
    draw_set_colour(c_dkgray);
    draw_rectangle(640 +68, 720 -72-500, 1280 -68, 720 -68, false);
    
    //Delete box
    draw_rectangle(640 +68-100, 720 -70-100, 640 +68, 720 -70, false);
    
    //Text
    draw_set_colour(c_white);
    draw_text(450, 150, "Inventory");
    draw_text(640+68-50, 720 -70-50, "DEL");
    
    if(inv_slot_selected == true)
    {
        draw_set_colour(c_navy);
        draw_rectangle(inv_preview_x, inv_preview_y,inv_preview_x +100, inv_preview_y +100, false);
        draw_set_colour(c_white);
        
        if(global.items[inv_display,0] == "" &amp;&amp; global.items[inv_display,4] == spr_none)
        {
            draw_text(450, 250, "No item");
        }
        else
        {
            draw_text(450, 250, string(global.items[inv_display,0]));
            draw_text(450, 270, string(global.items[inv_display,1]));
            
            if(global.items[inv_display,2] == 0)
            {
                draw_text(450, 290, "Type: Weapon");
            }
            else
            {
                if(global.items[inv_display,2] == 1)
                {
                    draw_text(450, 290, "Type: Armour");
                }
                else
                {
                    if(global.items[inv_display,2] == 2)
                    {
                        draw_text(450, 290, "Type: Potion");
                    }
                    else
                    {
                        draw_text(450, 290, "Type: Other");
                    }
                }
            }
            
            draw_text(450, 310, "Price: " + string(global.items[inv_display,3]) + " Bits");
        }
    }
    else
    {
        draw_text(450, 250, "No item");
    }
    
    //Item slots frame
    draw_set_alpha(0.5);
    
    for(i = 0; i &lt;= 20; i += 5)
    {
        draw_rectangle(640 +70+2 +i/5*100, 720 -70+2-500, 640 +70+100-2 +i/5*100, 720 -70-400-2, false);
    }
    for(i = 0; i &lt;= 20; i += 5)
    {
        draw_rectangle(640 +70+2 +i/5*100, 720 -70+2-400, 640 +70+100-2 +i/5*100, 720 -70-300-2, false);
    }
    for(i = 0; i &lt;= 20; i += 5)
    {
        draw_rectangle(640 +70+2 +i/5*100, 720 -70+2-300, 640 +70+100-2 +i/5*100, 720 -70-200-2, false);
    }
    for(i = 0; i &lt;= 20; i += 5)
    {
        draw_rectangle(640 +70+2 +i/5*100, 720 -70+2-200, 640 +70+100-2 +i/5*100, 720 -70-100-2, false);
    }
    for(i = 0; i &lt;= 20; i += 5)
    {
        draw_rectangle(640 +70+2 +i/5*100, 720 -70+2-100, 640 +70+100-2 +i/5*100, 720 -70-2, false);
    }
    
    //Item sprites
    //Collumn 1
    draw_set_alpha(1);
    
    for(i = 0; i &lt;= (5-1); i += 1)
    {
        draw_sprite_stretched(global.items[i,4], 0, 640 +70+4, 720 -70-500+4 +i*100, 92, 92);
    }
    //Collumn 2
    for(i = 5; i &lt;= (10-1); i += 1)
    {
        draw_sprite_stretched(global.items[i,4], 0, 640 +70+100+4, 720 -70-500+4 +(i-5)*100, 92, 92);
    }
    //Collumn 3
    for(i = 10; i &lt;= (15-1); i += 1)
    {
        draw_sprite_stretched(global.items[i,4], 0, 640 +70+200+4, 720 -70-500+4 +(i-10)*100, 92, 92);
    }
    //Collumn 4
    for(i = 15; i &lt;= (20-1); i += 1)
    {
        draw_sprite_stretched(global.items[i,4], 0, 640 +70+300+4, 720 -70-500+4 +(i-15)*100, 92, 92);
    }
    //Collumn 5
    for(i = 20; i &lt;= (25-1); i += 1)
    {
        draw_sprite_stretched(global.items[i,4], 0, 640 +70+400+4, 720 -70-500+4 +(i-20)*100, 92, 92);
    }
    
    draw_set_colour(c_white);
    draw_set_halign(fa_right);
    draw_text(1280 - 20, 20, "Available Slots: 25.");
    
    draw_set_halign(fa_left);
}
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Physics

physics_draw_debug();
draw_self();

draw_circle(x, y, 50, true);

//Line from player to cursor
draw_line(phy_position_x, phy_position_y, mouse_x, mouse_y);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="84">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Test Windows
//Text window

//Text window
with(instance_create(200, 520, obj_window_base))
{
    image_xscale = 12;
    image_yscale = 3;
    window_message1 = "Rape is just sex with more fun.";
    
    event_user(0);
}

//Avatar window
with(instance_create(0, 520, obj_window_base))
{
    image_xscale = 3;
    image_yscale = 3;
    window_speaker = spr_cobalt_right;
    
    event_user(0);
}

obj_window_base.test_t = true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>-1</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.100000001490116</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>100</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>10000</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>24,25</point>
    <point>19,25</point>
  </PhysicsShapePoints>
</object>
